(this.webpackJsonpants=this.webpackJsonpants||[]).push([[0],[,,,,,,,,,,function(t,e,n){t.exports=n(18)},,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var i=n(0),a=n.n(i),s=n(7),o=n.n(s),u=n(2),c=n(1),r=n(9),p=(n(15),function(t){var e=t.posX,n=t.posY,i=t.radius,s=t.opacity;return a.a.createElement("div",{className:"dot",style:{height:2*i+"px",width:2*i+"px",left:e-i+"px",top:n-i+"px",opacity:s}})}),h=(n(16),function(t){var e=t.fields,n=t.update,s=Object(i.useState)(!1),o=Object(u.a)(s,2),c=o[0],r=o[1];return a.a.createElement("div",{id:"dock"},a.a.createElement("div",{className:"ctrl"+(c?" open":" closed")},e.map((function(t,e){return a.a.createElement(i.Fragment,{key:e},a.a.createElement("label",null,t.label||t.key," ",a.a.createElement("span",{className:"value"},t.value)),a.a.createElement("input",{type:"range",value:t.value,min:t.min,max:t.max,step:t.step,onChange:function(e){return n(t.key,Number(e.target.value))}}))}))),a.a.createElement("button",{className:"door"+(c?" open":" closed"),onClick:function(){return r((function(t){return!t}))}},"\u2261"))}),l=n(8),d=n(5),g=2*Math.PI,m=function(t){return(g+Math.atan(t[1]/t[0])+(t[0]<0?Math.PI:0))%g},f=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return[Math.cos(t)*e,Math.sin(t)*e]},v=function(t){return t*Math.PI/180},y=function(){function t(e){Object(l.a)(this,t),this.posX=void 0,this.posY=void 0,this.velX=0,this.velY=0,this._agility=v(30),this.speed=void 0,this.minSpeed=void 0,this.maxSpeed=void 0,this.distancingRange=void 0,this.distancingFactor=void 0,this.posX=e.posX||Math.random()*window.innerWidth,this.posY=e.posY||Math.random()*window.innerHeight,this.agility=e.agility,this.speed=e.speed,this.minSpeed=e.minSpeed,this.maxSpeed=e.maxSpeed,this.distancingRange=e.distancingRange,this.distancingFactor=e.distancingFactor}return Object(d.a)(t,[{key:"pos",get:function(){return[this.posX,this.posY]},set:function(t){this.posX=t[0],this.posY=t[1]}},{key:"vel",get:function(){return[this.velX,this.velY]},set:function(t){this.velX=t[0],this.velY=t[1]}},{key:"angle",get:function(){return m(this.vel)}},{key:"agility",set:function(t){this._agility=v(t)}}]),Object(d.a)(t,[{key:"getPushes",value:function(t){var e=this;return t.map((function(t){if(t!==e){var n=function(t,e,n){var i=[e[0]-t[0],e[1]-t[1]];return i[0]>n[0]/2&&(i[0]-=n[0]),i[1]>n[1]/2&&(i[1]-=n[1]),i}(e.pos,t.pos,[window.innerWidth,window.innerHeight]);if(n[0]<=e.distancingRange&&n[1]<=e.distancingRange){var i=(a=n,Math.pow(Math.pow(a[0],2)+Math.pow(a[1],2),.5));return i<=e.distancingRange?{posDiff:n,distance:i}:null}return null}return null;var a})).filter((function(t){return null!==t}))}},{key:"calcPush",value:function(t){return Math.min(this.minSpeed+this.distancingFactor*this.distancingRange/t-1,this.maxSpeed)}},{key:"updatePosition",value:function(){return this.posX+=window.innerWidth+this.velX,this.posY+=window.innerHeight+this.velY,this.posX%=window.innerWidth,this.posY%=window.innerHeight,this}},{key:"updateVelocity",value:function(t){var e=this,n=this.getPushes(t);if(n.length>0){var i=[0,0];n.forEach((function(t){var n=m(t.posDiff)+Math.PI,a=f(n,e.calcPush(t.distance));i[0]+=a[0],i[1]+=a[1]})),this.vel=i}else{var a=this.angle;isNaN(a)&&(a=0),a+=2*(Math.random()-.5)*this._agility;var s=f(a,this.speed),o=Object(u.a)(s,2);this.velX=o[0],this.velY=o[1]}return this}}]),t}(),w=(n(17),function(t,e){switch(e.type){case"updateAntVelocities":var n=Object(r.a)(t.ants);return t.mouseDown&&n.push({pos:t.mousePos}),t.touches.forEach((function(t){return n.push({pos:t})})),t.ants.forEach((function(t){return t.updateVelocity(n)})),Object(c.a)({},t);case"updateAntPositions":return t.ants.forEach((function(t){return t.updatePosition()})),Object(c.a)({},t);case"updateAntSetting":if(e.setting&&e.value){if("count"===e.setting){for(;t.ants.length<e.value;)t.ants.push(new y(t.antSettings));for(;t.ants.length>e.value;)t.ants.pop();return Object(c.a)({},t)}var i=e.setting,a=e.value;return t.antSettings[i]=a,t.ants.forEach((function(t){t[i]=a})),Object(c.a)({},t)}break;case"mouseDown":return Object(c.a)({},t,{mouseDown:!0,mousePos:e.pos||t.mousePos});case"mouseUp":return Object(c.a)({},t,{mouseDown:!1,mousePos:e.pos||t.mousePos});case"mouseMove":if(e.pos)return Object(c.a)({},t,{mousePos:e.pos});break;case"touch":if(t.touches=[],e.touches)for(var s=0;s<e.touches.length;s++){var o=e.touches.item(s);o&&t.touches.push([o.clientX,o.clientY])}return Object(c.a)({},t)}return t}),b=function(){var t=Object(i.useReducer)(w,{ants:[],antSettings:{agility:30,speed:6,minSpeed:1,maxSpeed:10,distancingRange:100,distancingFactor:2},mousePos:[0,0],mouseDown:!1,touches:[]}),e=Object(u.a)(t,2),n=e[0],s=e[1];return a.a.useEffect((function(){var t=setInterval((function(){s({type:"updateAntPositions"}),s({type:"updateAntVelocities"})}),1e3/60);return s({type:"updateAntSetting",setting:"count",value:30}),function(){return clearInterval(t)}}),[]),a.a.createElement("div",{id:"app"},a.a.createElement("div",{id:"canvas",onMouseDown:function(t){return s({type:"mouseDown",pos:[t.clientX,t.clientY]})},onMouseMove:function(t){return s({type:"mouseMove",pos:[t.clientX,t.clientY]})},onMouseUp:function(){return s({type:"mouseUp"})},onTouchStart:function(t){return s({type:"touch",touches:t.touches})},onTouchMove:function(t){return s({type:"touch",touches:t.touches})},onTouchEnd:function(){return s({type:"touch"})},style:{cursor:n.mouseDown?"grab":"pointer"}},n.ants.map((function(t,e){return a.a.createElement(p,{key:e,posX:t.posX,posY:t.posY,radius:5})})),n.mouseDown&&a.a.createElement(p,{posX:n.mousePos[0],posY:n.mousePos[1],radius:n.antSettings.distancingRange,opacity:.1}),n.touches.map((function(t){return a.a.createElement(p,{posX:t[0],posY:t[1],radius:n.antSettings.distancingRange,opacity:.1})}))),a.a.createElement(h,{fields:[{key:"count",value:n.ants.length,min:1,max:200},{key:"agility",value:n.antSettings.agility,min:1,max:90},{key:"speed",value:n.antSettings.speed,min:1,max:50},{key:"distancingRange",label:"distancing range",value:n.antSettings.distancingRange,min:10,max:200,step:10},{key:"distancingFactor",label:"distancing factor",value:n.antSettings.distancingFactor,min:.1,max:4,step:.1}],update:function(t,e){return s({type:"updateAntSetting",setting:t,value:e})}}))};o.a.render(a.a.createElement(b,null),document.getElementById("root"))}],[[10,1,2]]]);
//# sourceMappingURL=main.36c0ec01.chunk.js.map