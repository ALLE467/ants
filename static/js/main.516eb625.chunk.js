(this.webpackJsonpants=this.webpackJsonpants||[]).push([[0],[,,,,,,,,,,function(e,t,n){e.exports=n(18)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),s=n(7),o=n.n(s),u=n(2),r=n(1),c=n(9),l=(n(15),function(e){var t=e.posX,n=e.posY,i=e.radius,s=e.opacity;return a.a.createElement("div",{className:"dot",style:{height:2*i+"px",width:2*i+"px",left:t-i+"px",top:n-i+"px",opacity:s}})}),p=(n(16),function(e){var t=e.fields,n=e.update,s=Object(i.useState)(!1),o=Object(u.a)(s,2),r=o[0],c=o[1];return a.a.createElement("div",{id:"dock"},a.a.createElement("div",{className:"ctrl"+(r?" open":" closed")},t.map((function(e,t){return a.a.createElement(i.Fragment,{key:t},a.a.createElement("label",null,e.label||e.key," ",a.a.createElement("span",{className:"value"},e.value)),a.a.createElement("input",{type:"range",value:e.value,min:e.min,max:e.max,step:e.step,onChange:function(t){return n(e.key,Number(t.target.value))}}))}))),a.a.createElement("button",{className:"door"+(r?" open":" closed"),onClick:function(){return c((function(e){return!e}))}},"\u2261"))}),h=n(8),d=n(5),g=2*Math.PI,m=function(e){return(g+Math.atan(e[1]/e[0])+(e[0]<0?Math.PI:0))%g},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return[Math.cos(e)*t,Math.sin(e)*t]},v=function(e){return e*Math.PI/180},y=function(){function e(t){Object(h.a)(this,e),this.posX=void 0,this.posY=void 0,this.velX=0,this.velY=0,this._agility=v(30),this.speed=void 0,this.minSpeed=void 0,this.maxSpeed=void 0,this.distancingRange=void 0,this.distancingFactor=void 0,this.posX=t.posX||Math.random()*window.innerWidth,this.posY=t.posY||Math.random()*window.innerHeight,this.agility=t.agility,this.speed=t.speed,this.minSpeed=t.minSpeed,this.maxSpeed=t.maxSpeed,this.distancingRange=t.distancingRange,this.distancingFactor=t.distancingFactor}return Object(d.a)(e,[{key:"pos",get:function(){return[this.posX,this.posY]},set:function(e){this.posX=e[0],this.posY=e[1]}},{key:"vel",get:function(){return[this.velX,this.velY]},set:function(e){this.velX=e[0],this.velY=e[1]}},{key:"angle",get:function(){return m(this.vel)}},{key:"agility",set:function(e){this._agility=v(e)}}]),Object(d.a)(e,[{key:"getPushes",value:function(e){var t=this;return e.map((function(e){if(e!==t){var n=function(e,t,n){var i=[t[0]-e[0],t[1]-e[1]];return i[0]>n[0]/2&&(i[0]-=n[0]),i[1]>n[1]/2&&(i[1]-=n[1]),i}(t.pos,e.pos,[window.innerWidth,window.innerHeight]);if(n[0]<=t.distancingRange&&n[1]<=t.distancingRange){var i=(a=n,Math.pow(Math.pow(a[0],2)+Math.pow(a[1],2),.5));return i<=t.distancingRange?{posDiff:n,distance:i}:null}return null}return null;var a})).filter((function(e){return null!==e}))}},{key:"calcPush",value:function(e){return Math.min(this.minSpeed+this.distancingFactor*this.distancingRange/e-1,this.maxSpeed)}},{key:"updatePosition",value:function(){return this.posX+=window.innerWidth+this.velX,this.posY+=window.innerHeight+this.velY,this.posX%=window.innerWidth,this.posY%=window.innerHeight,this}},{key:"updateVelocity",value:function(e){var t=this,n=this.getPushes(e);if(n.length>0){var i=[0,0];n.forEach((function(e){var n=m(e.posDiff)+Math.PI,a=f(n,t.calcPush(e.distance));i[0]+=a[0],i[1]+=a[1]})),this.vel=i}else{var a=this.angle;isNaN(a)&&(a=0),a+=2*(Math.random()-.5)*this._agility;var s=f(a,this.speed),o=Object(u.a)(s,2);this.velX=o[0],this.velY=o[1]}return this}}]),e}(),w=(n(17),function(e,t){switch(t.type){case"updateAntVelocities":var n=Object(c.a)(e.ants);return e.mouseDown&&n.push({pos:e.mousePos}),e.touches.forEach((function(e){return n.push({pos:e})})),e.ants.forEach((function(e){return e.updateVelocity(n)})),Object(r.a)({},e);case"updateAntPositions":return e.ants.forEach((function(e){return e.updatePosition()})),Object(r.a)({},e);case"updateSettings":if(t.setting&&t.value){if("count"===t.setting){for(;e.ants.length<t.value;)e.ants.push(new y(e.antSettings));for(;e.ants.length>t.value;)e.ants.pop();return Object(r.a)({},e)}if("renderRate"===t.setting)return Object(r.a)({},e,{renderRate:t.value});var i=t.setting,a=t.value;return e.antSettings[i]=a,e.ants.forEach((function(e){e[i]=a})),Object(r.a)({},e)}break;case"mouseDown":return Object(r.a)({},e,{mouseDown:!0,mousePos:t.pos||e.mousePos});case"mouseUp":return Object(r.a)({},e,{mouseDown:!1,mousePos:t.pos||e.mousePos});case"mouseMove":if(t.pos)return Object(r.a)({},e,{mousePos:t.pos});break;case"touch":if(e.touches=[],t.touches)for(var s=0;s<t.touches.length;s++){var o=t.touches.item(s);o&&e.touches.push([o.clientX,o.clientY])}return Object(r.a)({},e)}return e}),b=function(){var e=Object(i.useReducer)(w,{renderRate:60,ants:[],antSettings:{agility:30,speed:6,minSpeed:1,maxSpeed:10,distancingRange:100,distancingFactor:2},mousePos:[0,0],mouseDown:!1,touches:[]}),t=Object(u.a)(e,2),n=t[0],s=t[1];return a.a.useEffect((function(){return s({type:"updateSettings",setting:"count",value:30})}),[]),a.a.useEffect((function(){var e=setInterval((function(){s({type:"updateAntPositions"}),s({type:"updateAntVelocities"})}),1e3/n.renderRate);return console.log("render init"),function(){return clearInterval(e)}}),[n.renderRate]),a.a.createElement("div",{id:"app"},a.a.createElement("div",{id:"canvas",onMouseDown:function(e){return s({type:"mouseDown",pos:[e.clientX,e.clientY]})},onMouseMove:function(e){return s({type:"mouseMove",pos:[e.clientX,e.clientY]})},onMouseUp:function(){return s({type:"mouseUp"})},onTouchStart:function(e){return s({type:"touch",touches:e.touches})},onTouchMove:function(e){return s({type:"touch",touches:e.touches})},onTouchEnd:function(e){return s({type:"touch",touches:e.touches})},style:{cursor:n.mouseDown?"grab":"pointer"}},n.ants.map((function(e,t){return a.a.createElement(l,{key:t,posX:e.posX,posY:e.posY,radius:5})})),n.mouseDown&&a.a.createElement(l,{posX:n.mousePos[0],posY:n.mousePos[1],radius:n.antSettings.distancingRange,opacity:.1}),n.touches.map((function(e,t){return a.a.createElement(l,{key:t,posX:e[0],posY:e[1],radius:n.antSettings.distancingRange,opacity:.1})}))),a.a.createElement(p,{fields:[{key:"renderRate",label:"render rate",value:n.renderRate,min:1,max:60,step:1},{key:"count",value:n.ants.length,min:1,max:200},{key:"agility",value:n.antSettings.agility,min:1,max:90},{key:"speed",value:n.antSettings.speed,min:1,max:50},{key:"distancingRange",label:"distancing range",value:n.antSettings.distancingRange,min:10,max:200,step:10},{key:"distancingFactor",label:"distancing factor",value:n.antSettings.distancingFactor,min:.1,max:4,step:.1}],update:function(e,t){return s({type:"updateSettings",setting:e,value:t})}}))};o.a.render(a.a.createElement(b,null),document.getElementById("root"))}],[[10,1,2]]]);
//# sourceMappingURL=main.516eb625.chunk.js.map